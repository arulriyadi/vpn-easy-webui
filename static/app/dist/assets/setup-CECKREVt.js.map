{"version":3,"file":"setup-CECKREVt.js","sources":["../../src/views/setup.vue"],"sourcesContent":["<script>\nimport {DashboardConfigurationStore} from \"@/stores/DashboardConfigurationStore.js\";\nimport {fetchPost} from \"@/utilities/fetch.js\";\nimport LocaleText from \"@/components/text/localeText.vue\";\nexport default {\n\tname: \"setup\",\n\tcomponents: {LocaleText},\n\tsetup(){\n\t\tconst store = DashboardConfigurationStore();\n\t\treturn {store}\n\t},\n\tdata(){\n\t\treturn {\n\t\t\tsetup: {\n\t\t\t\tusername: \"\",\n\t\t\t\tnewPassword: \"\",\n\t\t\t\trepeatNewPassword: \"\",\n\t\t\t\tenable_totp: true\n\t\t\t},\n\t\t\tloading: false,\n\t\t\terrorMessage: \"\",\n\t\t\tdone: false\n\t\t}\n\t},\n\tcomputed: {\n\t\tgoodToSubmit(){\n\t\t\treturn this.setup.username \n\t\t\t\t&& this.setup.newPassword.length >= 8\n\t\t\t\t&& this.setup.repeatNewPassword.length >= 8\n\t\t\t\t&& this.setup.newPassword === this.setup.repeatNewPassword\n\t\t}\n\t},\n\tmethods: {\n\t\tsubmit(){\n\t\t\tthis.loading = true\n\t\t\tfetchPost(\"/api/Welcome_Finish\", this.setup, (res) => {\n\t\t\t\tif (res.status){\n\t\t\t\t\tthis.done = true;\n\t\t\t\t\tthis.$router.push('/2FASetup')\n\t\t\t\t}else{\n\t\t\t\t\tdocument.querySelectorAll(\"#createAccount input\").forEach(x => x.classList.add(\"is-invalid\"))\n\t\t\t\t\tthis.errorMessage = res.message;\n\t\t\t\t\tdocument.querySelector(\".login-container-fluid\")\n\t\t\t\t\t\t.scrollTo({\n\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\tbehavior: \"smooth\",\n\t\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tthis.loading = false\n\t\t\t})\n\t\t}\n\t}\n}\n</script>\n\n<template>\n\t<div class=\"container-fluid login-container-fluid d-flex main pt-5 overflow-scroll\" \n\t     :data-bs-theme=\"this.store.Configuration?.Server?.dashboard_theme\">\n\t\t<div class=\"m-auto text-body\" style=\"width: 500px\">\n\t\t\t<span class=\"dashboardLogo display-4\">\n\t\t\t\t<LocaleText t=\"Nice to meet you!\"></LocaleText>\n\t\t\t</span>\n\t\t\t<p class=\"mb-5\">\n\t\t\t\t<LocaleText t=\"Please fill in the following fields to finish setup\"></LocaleText>\n\t\t\t\tðŸ˜Š</p>\n\t\t\t<div>\n\t\t\t\t<h3>\n\t\t\t\t\t<LocaleText t=\"Create an account\"></LocaleText>\n\t\t\t\t</h3>\n\t\t\t\t<div class=\"alert alert-danger\" v-if=\"this.errorMessage\">\n\t\t\t\t\t{{this.errorMessage}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"d-flex flex-column gap-3\">\n\t\t\t\t\t<form id=\"createAccount\" class=\"d-flex flex-column gap-2\">\n\t\t\t\t\t\t<div class=\"form-group text-body\">\n\t\t\t\t\t\t\t<label for=\"username\" class=\"mb-1 text-muted\">\n\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t<LocaleText t=\"Enter an username you like\"></LocaleText>\n\t\t\t\t\t\t\t\t</small></label>\n\t\t\t\t\t\t\t<input type=\"text\"\n\t\t\t\t\t\t\t       autocomplete=\"username\"\n\t\t\t\t\t\t\t       v-model=\"this.setup.username\"\n\t\t\t\t\t\t\t       class=\"form-control\" id=\"username\" name=\"username\" required>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"form-group text-body\">\n\t\t\t\t\t\t\t<label for=\"password\" class=\"mb-1 text-muted\">\n\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t<LocaleText t=\"Enter a password\"></LocaleText>\n\t\t\t\t\t\t\t\t\t<code>\n\t\t\t\t\t\t\t\t\t\t<LocaleText t=\"(At least 8 characters and make sure is strong enough!)\"></LocaleText>\n\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input type=\"password\"\n\t\t\t\t\t\t\t       autocomplete=\"new-password\"\n\t\t\t\t\t\t\t       v-model=\"this.setup.newPassword\"\n\t\t\t\t\t\t\t       class=\"form-control\" id=\"password\" name=\"password\" required>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"form-group text-body\">\n\t\t\t\t\t\t\t<label for=\"confirmPassword\" class=\"mb-1 text-muted\">\n\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t<LocaleText t=\"Confirm password\"></LocaleText>\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input type=\"password\"\n\t\t\t\t\t\t\t       autocomplete=\"confirm-new-password\"\n\t\t\t\t\t\t\t       v-model=\"this.setup.repeatNewPassword\"\n\t\t\t\t\t\t\t       class=\"form-control\" id=\"confirmPassword\" name=\"confirmPassword\" required>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n<!--\t\t\t\t\t<div class=\"form-check form-switch\">-->\n<!--\t\t\t\t\t\t<input class=\"form-check-input\" type=\"checkbox\" role=\"switch\" id=\"enable_totp\" -->\n<!--\t\t\t\t\t\t       v-model=\"this.setup.enable_totp\">-->\n<!--\t\t\t\t\t\t<label class=\"form-check-label\" -->\n<!--\t\t\t\t\t\t       for=\"enable_totp\">Enable 2 Factor Authentication? <strong>Strongly recommended</strong></label>-->\n<!--\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t<Suspense>-->\n<!--\t\t\t\t\t\t<Transition name=\"fade\">-->\n<!--\t\t\t\t\t\t\t<Totp v-if=\"this.setup.enable_totp\" @verified=\"this.setup.verified_totp = true\"></Totp>-->\n<!--\t\t\t\t\t\t</Transition>-->\n<!--\t\t\t\t\t</Suspense>-->\n\t\t\t\t\t\n\t\t\t\t\t<button class=\"btn btn-dark btn-lg mb-5 d-flex btn-brand shadow align-items-center\" \n\t\t\t\t\t        ref=\"signInBtn\"\n\t\t\t\t\t        :disabled=\"!this.goodToSubmit || this.loading || this.done\" @click=\"this.submit()\">\n\t\t\t\t\t\t<span class=\"d-flex align-items-center w-100\" v-if=\"!this.loading && !this.done\">\n\t\t\t\t\t\t\t<LocaleText t=\"Next\"></LocaleText>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<i class=\"bi bi-chevron-right ms-auto\"></i></span>\n\t\t\t\t\t\t<span class=\"d-flex align-items-center w-100\" v-else>\n\t\t\t\t\t\t\t<LocaleText t=\"Saving...\"></LocaleText>\n\t\t\t\t\t\t\t<span class=\"spinner-border ms-auto spinner-border-sm\" role=\"status\">\n\t\t\t\t\t\t\t  <span class=\"visually-hidden\">Loading...</span>\n\t\t\t\t\t\t\t</span></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<style scoped>\n\n</style>"],"names":["_sfc_main","LocaleText","DashboardConfigurationStore","fetchPost","res","x","_hoisted_1","_hoisted_3","_hoisted_4","_hoisted_6","_hoisted_8","_hoisted_10","_hoisted_12","_hoisted_14","_createElementBlock","_createElementVNode","_hoisted_2","_createVNode","_component_LocaleText","_cache","_createTextVNode","_hoisted_5","_toDisplayString","_createCommentVNode","_hoisted_7","_hoisted_9","$event","_vModelText","_hoisted_11","_hoisted_13","_openBlock","_hoisted_15","_hoisted_16"],"mappings":"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"}