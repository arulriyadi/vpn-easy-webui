{"version":3,"file":"peerQRCode-C7Z6XTrL.js","sources":["../../src/components/configurationComponents/peerQRCode.vue"],"sourcesContent":["<script>\nimport QRCode from \"qrcode\";\nimport LocaleText from \"@/components/text/localeText.vue\";\nimport {fetchGet} from \"@/utilities/fetch.js\";\nimport {DashboardConfigurationStore} from \"@/stores/DashboardConfigurationStore.js\";\nexport default {\n\tname: \"peerQRCode\",\n\tcomponents: {LocaleText},\n\tprops: {\n\t\tselectedPeer: Object\n\t},\n\tsetup(){\n\t\tconst dashboardStore = DashboardConfigurationStore();\n\t\treturn {dashboardStore}\n\t},\n\tdata(){\n\t\treturn{\n\t\t\tloading: true\n\t\t}\n\t},\n\tmounted() {\n\t\tfetchGet(\"/api/downloadPeer/\"+this.$route.params.id, {\n\t\t\tid: this.selectedPeer.id\n\t\t}, (res) => {\n\t\t\tthis.loading = false;\n\t\t\tif (res.status){\n\t\t\t\tlet data = \"\"\n\t\t\t\tif (this.selectedPeer.configuration.Protocol === \"awg\"){\n\t\t\t\t\tlet awgQRCodeObject = {\n\t\t\t\t\t\tcontainers: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tawg: {\n\t\t\t\t\t\t\t\t\tisThirdPartyConfig: true,\n\t\t\t\t\t\t\t\t\tlast_config: res.data.file,\n\t\t\t\t\t\t\t\t\tport: this.selectedPeer.configuration.ListenPort,\n\t\t\t\t\t\t\t\t\ttransport_proto: \"udp\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcontainer: \"amnezia-awg\",\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tdefaultContainer: \"amnezia-awg\",\n\t\t\t\t\t\tdescription: this.selectedPeer.name,\n\t\t\t\t\t\thostName: this.dashboardStore.Configuration.Peers.remote_endpoint\n\t\t\t\t\t}\n\t\t\t\t\tdata = btoa(JSON.stringify(awgQRCodeObject))\n\t\t\t\t}else{\n\t\t\t\t\tdata = res.data.file\n\t\t\t\t}\n\t\t\t\tQRCode.toCanvas(document.querySelector(\"#qrcode\"), data,  (error) => {\n\t\t\t\t\tif (error) console.error(error)\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tthis.dashboardStore.newMessage(\"Server\", res.message, \"danger\")\n\t\t\t}\n\t\t})\n\t}\n}\n</script>\n\n<template>\n\t<div class=\"peerSettingContainer w-100 h-100 position-absolute top-0 start-0\">\n\t\t<div class=\"container d-flex h-100 w-100\">\n\t\t\t<div class=\"m-auto modal-dialog-centered dashboardModal justify-content-center\">\n\t\t\t\t<div class=\"card rounded-3 shadow\">\n\t\t\t\t\t<div class=\"card-header bg-transparent d-flex align-items-center gap-2 border-0 p-4 pb-0\">\n\t\t\t\t\t\t<h4 class=\"mb-0\">\n\t\t\t\t\t\t\t<LocaleText t=\"QR Code\"></LocaleText>\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t<button type=\"button\" class=\"btn-close ms-auto\" @click=\"this.$emit('close')\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"card-body p-4\">\n\t\t\t\t\t\t<div  class=\"d-flex\">\n\t\t\t\t\t\t\t<canvas id=\"qrcode\" class=\"rounded-3 shadow animate__animated animate__fadeIn animate__faster\" \n\t\t\t\t\t\t\t        \n\t\t\t\t\t\t\t        :class=\"{'d-none': loading}\"></canvas>\n\t\t\t\t\t\t\t<div class=\"spinner-border m-auto\" role=\"status\" v-if=\"loading\">\n\t\t\t\t\t\t\t\t<span class=\"visually-hidden\">Loading...</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<style scoped>\n@media screen and (max-width: 768px) {\n\t#qrcode{\n\t\twidth: 100% !important;\n\t\theight: auto !important;\n\t\taspect-ratio: 1/1;\n\t}\n}\n</style>"],"names":["_sfc_main","LocaleText","DashboardConfigurationStore","fetchGet","res","data","awgQRCodeObject","QRCode","error","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_openBlock","_createElementBlock","_createElementVNode","_createVNode","_component_LocaleText","_normalizeClass","$data","_hoisted_9","_cache","_createCommentVNode"],"mappings":"8LAKA,MAAKA,EAAU,CACd,KAAM,aACN,WAAY,CAAC,WAAAC,CAAU,EACvB,MAAO,CACN,aAAc,MACd,EACD,OAAO,CAEN,MAAO,CAAC,eADeC,GACD,CACtB,EACD,MAAM,CACL,MAAM,CACL,QAAS,EACV,CACA,EACD,SAAU,CACTC,EAAS,qBAAqB,KAAK,OAAO,OAAO,GAAI,CACpD,GAAI,KAAK,aAAa,EACtB,EAAGC,GAAQ,CAEX,GADA,KAAK,QAAU,GACXA,EAAI,OAAO,CACd,IAAIC,EAAO,GACX,GAAI,KAAK,aAAa,cAAc,WAAa,MAAM,CACtD,IAAIC,EAAkB,CACrB,WAAY,CACX,CACC,IAAK,CACJ,mBAAoB,GACpB,YAAaF,EAAI,KAAK,KACtB,KAAM,KAAK,aAAa,cAAc,WACtC,gBAAiB,KACjB,EACD,UAAW,aACZ,CACA,EACD,iBAAkB,cAClB,YAAa,KAAK,aAAa,KAC/B,SAAU,KAAK,eAAe,cAAc,MAAM,eACnD,EACAC,EAAO,KAAK,KAAK,UAAUC,CAAe,CAAC,OAE3CD,EAAOD,EAAI,KAAK,KAEjBG,EAAO,SAAS,SAAS,cAAc,SAAS,EAAGF,EAAQG,GAAU,CAChEA,GAAO,QAAQ,MAAMA,CAAK,EAC9B,OAED,KAAK,eAAe,WAAW,SAAUJ,EAAI,QAAS,QAAQ,EAE/D,CACF,CACD,EAIMK,EAAA,CAAA,MAAM,kEAAkE,EACvEC,EAAA,CAAA,MAAM,8BAA8B,EACnCC,EAAA,CAAA,MAAM,oEAAoE,EACzEC,EAAA,CAAA,MAAM,uBAAuB,EAC5BC,EAAA,CAAA,MAAM,8EAA8E,EACpFC,EAAA,CAAA,MAAM,MAAM,EAKZC,EAAA,CAAA,MAAM,eAAe,EACnBC,EAAA,CAAA,MAAM,QAAQ,KAvE1B,IAAA,EA2EY,MAAM,wBAAwB,KAAK,0DAf9C,OAAAC,EAAA,EAAAC,EAuBM,MAvBNT,EAuBM,CAtBLU,EAqBM,MArBNT,EAqBM,CApBLS,EAmBM,MAnBNR,EAmBM,CAlBLQ,EAiBM,MAjBNP,EAiBM,CAhBLO,EAKM,MALNN,EAKM,CAJLM,EAEK,KAFLL,EAEK,CADJM,EAAqCC,EAAA,CAAzB,EAAE,SAAS,CAAA,IAExBF,EAAsF,SAAA,CAA9E,KAAK,SAAS,MAAM,oBAAqB,4BAAY,MAAK,OAAA,OAEnEA,EASM,MATNJ,EASM,CARLI,EAOM,MAPNH,EAOM,CANLG,EAE8C,SAAA,CAFtC,GAAG,SAAS,MAxE3BG,EAAA,CAwEiC,qEAAoE,CAAA,SAEnEC,EAAO,OAAA,CAAA,CAAA,WACqBA,EAAO,SAA9DN,EAAA,EAAAC,EAEM,MAFNM,EAEMC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CADLN,EAA+C,OAAzC,CAAA,MAAM,iBAAiB,EAAC,aAAU,EAAA,MA5EhDO,EAAA,GAAA,EAAA"}