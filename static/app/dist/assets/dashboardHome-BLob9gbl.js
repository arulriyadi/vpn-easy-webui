import{_ as f,p as k,r as $,q as w,a as r,c as l,d as m,w as D,s as h,n as x,b as s,t as a,e as S,j as P,D as C,o as U,v as M,g as V,F as g,m as p,i as y,W as A,f as b,k as I}from"./index-D8hVfsLB.js";import{L as v}from"./localeText-tc0gf0_X.js";import{C as B}from"./storageMount.vue_vue_type_style_index_0_scoped_9509d7a0_lang-DCOfrlZv.js";const L={class:"text-muted me-2"},j={class:"fw-bold"},W={__name:"storageMount",props:{mount:Object,align:Boolean,square:Boolean},setup(n){k(e=>({"2dc8ab7e":u.value}));const t=n,c=$(!1),u=w(()=>t.square?"40px":"25px");return(e,o)=>(r(),l("div",{class:"flex-grow-1 square rounded-3 border position-relative",onMouseenter:o[0]||(o[0]=d=>c.value=!0),onMouseleave:o[1]||(o[1]=d=>c.value=!1),style:h({"background-color":`rgb(25 135 84 / ${n.mount.percent}%)`})},[m(P,{name:"zoomReversed"},{default:D(()=>[c.value?(r(),l("div",{key:0,style:h([{"white-space":"nowrap"},{top:u.value}]),class:x(["floatingLabel z-3 border position-absolute d-block p-1 px-2 bg-body text-body rounded-3 border shadow d-flex",[n.align?"end-0":"start-0"]])},[s("small",L,[s("samp",null,a(n.mount.mountPoint),1)]),s("small",j,a(n.mount.percent)+"% ",1)],6)):S("",!0)]),_:1})],36))}},R=f(W,[["__scopeId","data-v-9509d7a0"]]),T={class:"row text-body g-3 mb-5"},q={class:"col-md-6 col-sm-12 col-xl-3"},G={class:"d-flex align-items-center"},z={class:"text-muted"},N={class:"ms-auto"},F={key:0},H={key:1,class:"spinner-border spinner-border-sm"},E={class:"progress",role:"progressbar",style:{height:"6px"}},O={class:"d-flex mt-2 gap-1"},J={class:"col-md-6 col-sm-12 col-xl-3"},K={class:"d-flex align-items-center"},Q={class:"text-muted"},X={class:"ms-auto"},Y={key:0},Z={key:1,class:"spinner-border spinner-border-sm"},ss={class:"progress",role:"progressbar",style:{height:"6px"}},ts={class:"d-flex mt-2 gap-1"},es={class:"col-md-6 col-sm-12 col-xl-3"},os={class:"d-flex align-items-center"},is={class:"text-muted"},ns={class:"ms-auto"},as={key:0},rs={key:1,class:"spinner-border spinner-border-sm"},ls={class:"progress",role:"progressbar",style:{height:"6px"}},ds={class:"col-md-6 col-sm-12 col-xl-3"},cs={class:"d-flex align-items-center"},us={class:"text-muted"},ms={class:"ms-auto"},_s={key:0},bs={key:1,class:"spinner-border spinner-border-sm"},hs={__name:"systemStatusWidget",setup(n){const t=C();let c=null;U(()=>{u(),c=setInterval(()=>{u()},5e3)}),M(()=>{clearInterval(c)});const u=()=>{V("/api/systemStatus",{},o=>{t.SystemStatus=o.data})},e=w(()=>t.SystemStatus);return(o,d)=>(r(),l("div",T,[s("div",q,[s("div",G,[s("h6",z,[d[0]||(d[0]=s("i",{class:"bi bi-cpu-fill me-2"},null,-1)),m(v,{t:"CPU"})]),s("h6",N,[e.value?(r(),l("span",F,a(e.value.CPU.cpu_percent)+"% ",1)):(r(),l("span",H))])]),s("div",E,[s("div",{class:"progress-bar",style:h({width:`${e.value?.CPU.cpu_percent}%`})},null,4)]),s("div",O,[(r(!0),l(g,null,p(e.value?.CPU.cpu_percent_per_cpu,(i,_)=>(r(),y(B,{key:_,align:_+1>Math.round(e.value?.CPU.cpu_percent_per_cpu.length/2),core_number:_,percentage:i},null,8,["align","core_number","percentage"]))),128))])]),s("div",J,[s("div",K,[s("h6",Q,[d[1]||(d[1]=s("i",{class:"bi bi-device-ssd-fill me-2"},null,-1)),m(v,{t:"Storage"})]),s("h6",X,[e.value?(r(),l("span",Y,a(e.value.Disks.find(i=>i.mountPoint==="/")?e.value?.Disks.find(i=>i.mountPoint==="/").percent:e.value?.Disks[0].percent)+"% ",1)):(r(),l("span",Z))])]),s("div",ss,[s("div",{class:"progress-bar bg-success",style:h({width:`${e.value?.Disks.find(i=>i.mountPoint==="/")?e.value?.Disks.find(i=>i.mountPoint==="/").percent:e.value?.Disks[0].percent}%`})},null,4)]),s("div",ts,[e.value?(r(!0),l(g,{key:0},p(e.value?.Disks,(i,_)=>(r(),y(R,{key:i.mountPoint,align:_+1>Math.round(e.value?.Disks.length/2),mount:i},null,8,["align","mount"]))),128)):S("",!0)])]),s("div",es,[s("div",os,[s("h6",is,[d[2]||(d[2]=s("i",{class:"bi bi-memory me-2"},null,-1)),m(v,{t:"Memory"})]),s("h6",ns,[e.value?(r(),l("span",as,a(e.value?.Memory.VirtualMemory.percent)+"% ",1)):(r(),l("span",rs))])]),s("div",ls,[s("div",{class:"progress-bar bg-info",style:h({width:`${e.value?.Memory.VirtualMemory.percent}%`})},null,4)])]),s("div",ds,[s("div",cs,[s("h6",us,[d[3]||(d[3]=s("i",{class:"bi bi-memory me-2"},null,-1)),m(v,{t:"Swap Memory"})]),s("h6",ms,[e.value?(r(),l("span",_s,a(e.value?.Memory.SwapMemory.percent)+"% ",1)):(r(),l("span",bs))])]),d[4]||(d[4]=s("div",{class:"progress",role:"progressbar",style:{height:"6px"}},[s("div",{class:"progress-bar bg-warning",style:{width:"$ data?.Memory.SwapMemory.percent}%"}})],-1))])]))}},vs=f(hs,[["__scopeId","data-v-851170e4"]]),gs={name:"dashboardHome",components:{SystemStatus:vs},setup(){const n=C(),t=A();return{store:n,wireguardStore:t}},data(){return{recentActivity:[],stats:{totalUsers:0,systemUptime:"Loading...",dashboardVersion:"Loading..."}}},computed:{activeConfigs(){return this.wireguardStore.Configurations?this.wireguardStore.Configurations.filter(n=>n.Status).length:0},totalConfigs(){return this.wireguardStore.Configurations?this.wireguardStore.Configurations.length:0},totalPeers(){return this.wireguardStore.Configurations?this.wireguardStore.Configurations.reduce((n,t)=>n+(t.PeerCount||0),0):0},connectedPeers(){return Math.floor(this.totalPeers*.7)},totalUsers(){return this.stats.totalUsers},systemStatus(){return this.activeConfigs>0?"Active":"Idle"},systemUptime(){return this.stats.systemUptime},dashboardVersion(){return this.stats.dashboardVersion}},async mounted(){await this.loadData(),this.loadRecentActivity(),this.loadSystemInfo()},methods:{async loadData(){try{await this.wireguardStore.getConfigurations()}catch(n){console.error("Failed to load dashboard data:",n)}},loadRecentActivity(){this.recentActivity=[{id:1,action:"System Started",description:"WGDashboard has been started successfully",type:"success",timestamp:new Date(Date.now()-3e5)},{id:2,action:"Configuration Loaded",description:"WireGuard configurations loaded",type:"info",timestamp:new Date(Date.now()-6e5)},{id:3,action:"User Login",description:"Admin user logged in",type:"success",timestamp:new Date(Date.now()-9e5)}]},loadSystemInfo(){this.stats.systemUptime="2 hours, 15 minutes",this.stats.dashboardVersion="4.2.5",this.stats.totalUsers=3},refreshData(){this.loadData(),this.loadRecentActivity(),this.loadSystemInfo()},formatTime(n){return new Date(n).toLocaleString()},getActivityBadgeClass(n){return{success:"bg-success",info:"bg-info",warning:"bg-warning",error:"bg-danger"}[n]||"bg-secondary"}}},ps={class:"container-fluid"},fs={class:"row"},ys={class:"col-12"},ws={class:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},xs={class:"btn-toolbar mb-2 mb-md-0"},Ss={class:"btn-group me-2"},Cs={class:"row mb-4"},ks={class:"col-md-3 mb-3"},$s={class:"card bg-primary text-white"},Ds={class:"card-body"},Ps={class:"d-flex justify-content-between"},Us={class:"mb-0"},Ms={class:"col-md-3 mb-3"},Vs={class:"card bg-success text-white"},As={class:"card-body"},Is={class:"d-flex justify-content-between"},Bs={class:"mb-0"},Ls={class:"col-md-3 mb-3"},js={class:"card bg-info text-white"},Ws={class:"card-body"},Rs={class:"d-flex justify-content-between"},Ts={class:"mb-0"},qs={class:"col-md-3 mb-3"},Gs={class:"card bg-warning text-white"},zs={class:"card-body"},Ns={class:"d-flex justify-content-between"},Fs={class:"mb-0"},Hs={class:"row mb-4"},Es={class:"col-12"},Os={class:"card"},Js={class:"card-body"},Ks={class:"row"},Qs={class:"col-md-6"},Xs={class:"card"},Ys={class:"card-body"},Zs={class:"list-group list-group-flush"},st={class:"mb-1"},tt={class:"mb-1 text-muted"},et={class:"text-muted"},ot={class:"col-md-6"},it={class:"card"},nt={class:"card-body"},at={class:"row"},rt={class:"col-6"},lt={class:"text-muted"},dt={class:"col-6"},ct={class:"text-muted"},ut={class:"col-6 mt-3"},mt={class:"text-muted"},_t={class:"col-6 mt-3"},bt={class:"text-muted"};function ht(n,t,c,u,e,o){const d=I("SystemStatus");return r(),l("div",ps,[s("div",fs,[s("div",ys,[s("div",ws,[t[2]||(t[2]=s("h1",{class:"h2"},[s("i",{class:"bi bi-house me-2"}),b(" Dashboard ")],-1)),s("div",xs,[s("div",Ss,[s("button",{type:"button",class:"btn btn-sm btn-outline-secondary",onClick:t[0]||(t[0]=(...i)=>o.refreshData&&o.refreshData(...i))},t[1]||(t[1]=[s("i",{class:"bi bi-arrow-clockwise me-1"},null,-1),b(" Refresh ")]))])])])])]),s("div",Cs,[s("div",ks,[s("div",$s,[s("div",Ds,[s("div",Ps,[s("div",null,[t[3]||(t[3]=s("h6",{class:"card-title"},"WireGuard Configs",-1)),s("h3",Us,a(o.activeConfigs),1)]),t[4]||(t[4]=s("div",{class:"align-self-center"},[s("i",{class:"bi bi-shield-lock fs-1"})],-1))])])])]),s("div",Ms,[s("div",Vs,[s("div",As,[s("div",Is,[s("div",null,[t[5]||(t[5]=s("h6",{class:"card-title"},"Total Peers",-1)),s("h3",Bs,a(o.totalPeers),1)]),t[6]||(t[6]=s("div",{class:"align-self-center"},[s("i",{class:"bi bi-people fs-1"})],-1))])])])]),s("div",Ls,[s("div",js,[s("div",Ws,[s("div",Rs,[s("div",null,[t[7]||(t[7]=s("h6",{class:"card-title"},"Connected Users",-1)),s("h3",Ts,a(o.totalUsers),1)]),t[8]||(t[8]=s("div",{class:"align-self-center"},[s("i",{class:"bi bi-person-check fs-1"})],-1))])])])]),s("div",qs,[s("div",Gs,[s("div",zs,[s("div",Ns,[s("div",null,[t[9]||(t[9]=s("h6",{class:"card-title"},"System Status",-1)),s("h3",Fs,a(o.systemStatus),1)]),t[10]||(t[10]=s("div",{class:"align-self-center"},[s("i",{class:"bi bi-cpu fs-1"})],-1))])])])])]),s("div",Hs,[s("div",Es,[s("div",Os,[t[11]||(t[11]=s("div",{class:"card-header"},[s("h5",{class:"card-title mb-0"},[s("i",{class:"bi bi-cpu me-2"}),b(" System Status ")])],-1)),s("div",Js,[m(d)])])])]),s("div",Ks,[s("div",Qs,[s("div",Xs,[t[12]||(t[12]=s("div",{class:"card-header"},[s("h5",{class:"card-title mb-0"},[s("i",{class:"bi bi-clock-history me-2"}),b(" Recent Activity ")])],-1)),s("div",Ys,[s("div",Zs,[(r(!0),l(g,null,p(e.recentActivity,i=>(r(),l("div",{key:i.id,class:"list-group-item d-flex justify-content-between align-items-center"},[s("div",null,[s("h6",st,a(i.action),1),s("p",tt,a(i.description),1),s("small",et,a(o.formatTime(i.timestamp)),1)]),s("span",{class:x(["badge",o.getActivityBadgeClass(i.type)])},a(i.type),3)]))),128))])])])]),s("div",ot,[s("div",it,[t[21]||(t[21]=s("div",{class:"card-header"},[s("h5",{class:"card-title mb-0"},[s("i",{class:"bi bi-info-circle me-2"}),b(" System Information ")])],-1)),s("div",nt,[s("div",at,[s("div",rt,[t[13]||(t[13]=s("strong",null,"WGDashboard Version:",-1)),t[14]||(t[14]=s("br",null,null,-1)),s("small",lt,a(o.dashboardVersion),1)]),s("div",dt,[t[15]||(t[15]=s("strong",null,"System Uptime:",-1)),t[16]||(t[16]=s("br",null,null,-1)),s("small",ct,a(o.systemUptime),1)]),s("div",ut,[t[17]||(t[17]=s("strong",null,"Active Configurations:",-1)),t[18]||(t[18]=s("br",null,null,-1)),s("small",mt,a(o.activeConfigs)+" / "+a(o.totalConfigs),1)]),s("div",_t,[t[19]||(t[19]=s("strong",null,"Connected Peers:",-1)),t[20]||(t[20]=s("br",null,null,-1)),s("small",bt,a(o.connectedPeers),1)])])])])])])])}const ft=f(gs,[["render",ht],["__scopeId","data-v-e1eeff88"]]);export{ft as default};
//# sourceMappingURL=dashboardHome-BLob9gbl.js.map
