import{r as D,o as A,a as r,c as m,b as e,d as s,e as _,f as h,t as x,_ as S,D as M,w as n,T as $,n as c,u as F,W as V,g as R,G as L,h as C,i as w,j as y,k as v,l as T,S as H,F as N,m as G}from"./index-D8hVfsLB.js";import{L as b}from"./localeText-tc0gf0_X.js";import{M as z}from"./message-6PNyVqP6.js";import"./dayjs.min-CxMP4GVf.js";const B={class:"peerSettingContainer w-100 h-100 position-absolute top-0 start-0 overflow-y-scroll"},O={class:"container d-flex h-100 w-100"},U={class:"m-auto modal-dialog-centered dashboardModal"},W={class:"card rounded-3 shadow flex-grow-1"},j={class:"card-header bg-transparent d-flex align-items-center gap-2 border-0 p-4 pb-2"},I={class:"mb-0"},P={class:"card-body px-4 pb-4 d-flex flex-column gap-2"},E={class:"card text-decoration-none",target:"_blank",role:"button",href:"https://discord.gg/72TwzjeuWm"},q={class:"card-body d-flex gap-4 align-items-center"},J={class:"d-flex align-items-center"},Y={class:"badge rounded-pill text-bg-primary ms-2"},K={key:0,class:"spinner-border spinner-border-sm",style:{width:"0.7rem",height:"0.7rem"}},Q={key:1},X={class:"text-muted"},Z={class:"card text-decoration-none",href:"https://docs.wgdashboard.dev/",target:"_blank"},ee={class:"card-body d-flex gap-4 align-items-center"},te={class:"mb-0"},se={class:"text-muted"},oe={__name:"helpModal",setup(u){const t=D(!0),p=D(void 0);return A(()=>{t.value=!0,fetch("https://discord.com/api/guilds/1276818723637956628/widget.json").then(d=>d.json()).then(d=>{p.value=d,t.value=!1}).catch(()=>{t.value=!1})}),(d,a)=>(r(),m("div",B,[e("div",O,[e("div",U,[e("div",W,[e("div",j,[e("h4",I,[s(b,{t:"Help"})]),e("button",{type:"button",class:"btn-close ms-auto",onClick:a[0]||(a[0]=i=>d.$emit("close"))})]),e("div",P,[e("a",E,[e("div",q,[a[3]||(a[3]=e("h1",{class:"mb-0"},[e("i",{class:"bi bi-discord"})],-1)),e("div",null,[e("div",J,[a[2]||(a[2]=e("h5",{class:"mb-0"}," Discord Server ",-1)),e("span",Y,[t.value?(r(),m("span",K)):_("",!0),p.value!==void 0&&!t.value?(r(),m("span",Q,[a[1]||(a[1]=e("i",{class:"bi bi-person-fill me-2"},null,-1)),h(x(p.value.presence_count)+" Online ",1)])):_("",!0)])]),e("small",X,[s(b,{t:"Join our Discord server for quick help or chat about WGDashboard!"})])])])]),e("a",Z,[e("div",ee,[a[4]||(a[4]=e("h1",{class:"mb-0"},[e("i",{class:"bi bi-hash"})],-1)),e("div",null,[e("h5",te,[s(b,{t:"Official Documentation"})]),e("small",se,[s(b,{t:"Official documentation contains User Guides and more..."})])])])])])])])])]))}},ae={key:"header",class:"shadow"},ne={class:"p-3 d-flex gap-2 flex-column"},ie={class:"d-flex text-body"},le={class:"d-flex flex-column align-items-start gap-1"},de={class:"mb-0"},re={class:"mb-0"},ue={class:"list-group"},ce={href:"https://docs.wgdashboard.dev/",target:"_blank",class:"list-group-item list-group-item-action d-flex align-items-center"},me={target:"_blank",role:"button",href:"https://discord.gg/72TwzjeuWm",class:"list-group-item list-group-item-action d-flex align-items-center"},ge={__name:"agentModal",emits:["close"],setup(u,{emit:t}){const p=t,d=M();return(a,i)=>(r(),m("div",{class:c(["agentContainer m-2 rounded-3 d-flex flex-column text-body",{enabled:F(d).HelpAgent.Enable}])},[s($,{name:"agent-message"},{default:n(()=>[e("div",ae,[e("div",ne,[e("div",ie,[e("div",le,[e("h5",de,[s(b,{t:"Help"})])]),e("a",{role:"button",class:"ms-auto text-body",onClick:i[0]||(i[0]=o=>p("close"))},i[1]||(i[1]=[e("h5",{class:"mb-0"},[e("i",{class:"bi bi-x-lg"})],-1)]))]),e("p",re,[s(b,{t:"You can visit our: "})]),e("div",ue,[e("a",ce,[i[2]||(i[2]=e("i",{class:"bi bi-book-fill"},null,-1)),s(b,{class:"ms-auto",t:"Official Documentation"})]),e("a",me,[i[3]||(i[3]=e("i",{class:"bi bi-discord"},null,-1)),s(b,{class:"ms-auto",t:"Discord Server"})])])])])]),_:1})],2))}},be=S(ge,[["__scopeId","data-v-f37f608d"]]),pe={name:"navbar",components:{HelpModal:oe,LocaleText:b,AgentModal:be},setup(){const u=V(),t=M();return{wireguardConfigurationsStore:u,dashboardConfigurationStore:t}},data(){return{updateAvailable:!1,updateMessage:"Checking for update...",updateUrl:"",openHelpModal:!1,openAgentModal:!1,showVpnDropdown:!1,showFirewallDropdown:!1,showRbacDropdown:!1}},computed:{getActiveCrossServer(){if(this.dashboardConfigurationStore.ActiveServerConfiguration)return new URL(this.dashboardConfigurationStore.CrossServerConfiguration.ServerList[this.dashboardConfigurationStore.ActiveServerConfiguration].host)}},mounted(){R("/api/getDashboardUpdate",{},u=>{u.status?(u.data&&(this.updateAvailable=!0,this.updateUrl=u.data),this.updateMessage=u.message):(this.updateMessage=L("Failed to check available update"),console.log(`Failed to get update: ${u.message}`))})},methods:{toggleVpnDropdown(){this.showVpnDropdown=!this.showVpnDropdown},toggleFirewallDropdown(){this.showFirewallDropdown=!this.showFirewallDropdown},toggleRbacDropdown(){this.showRbacDropdown=!this.showRbacDropdown}}},ve=["data-bs-theme"],fe={id:"sidebarMenu",class:"bg-body-tertiary sidebar border h-100 rounded-3 shadow overflow-y-scroll"},he={class:"sidebar-sticky"},_e={class:"text-white text-center m-0 py-3 mb-2 btn-brand"},we={key:0,class:"ms-auto"},xe={class:"nav flex-column px-2 gap-1"},ke={class:"nav-item"},Ce={class:"nav-item"},ye={class:"nav-item"},Se={class:"nav flex-column px-2 gap-1"},Me={class:"nav-item"},De={class:"ms-4 mt-1"},$e={class:"nav flex-column px-2 gap-1"},Ae={class:"nav-item"},Fe={class:"ms-4 mt-1"},Ve={class:"nav-item"},Re={class:"ms-4 mt-1"},Le={class:"nav flex-column px-2 gap-1"},Te={class:"nav-item"},He={class:"nav-item"},Ne={class:"nav-item"},Ge={class:"nav-item"},ze={class:"nav-item"},Be={class:"nav flex-column px-2 mb-3"},Oe={class:"nav-item"},Ue={class:"nav-item",style:{"font-size":"0.8rem"}},We=["href"],je={class:"nav-link text-muted rounded-3"},Ie={key:1,class:"nav-link text-muted rounded-3"};function Pe(u,t,p,d,a,i){const o=v("LocaleText"),l=v("RouterLink"),k=v("HelpModal"),f=v("AgentModal");return r(),m("div",{class:c(["col-md-3 col-lg-2 d-md-block p-2 navbar-container",{active:this.dashboardConfigurationStore.ShowNavBar}]),"data-bs-theme":d.dashboardConfigurationStore.Configuration?.Server?.dashboard_theme},[e("nav",fe,[e("div",he,[e("div",_e,[t[8]||(t[8]=e("h5",{class:"mb-0"}," WGDashboard ",-1)),i.getActiveCrossServer!==void 0?(r(),m("small",we,[t[7]||(t[7]=e("i",{class:"bi bi-hdd-rack-fill me-2"},null,-1)),h(x(i.getActiveCrossServer.host),1)])):_("",!0)]),e("ul",xe,[e("li",ke,[s(l,{class:"nav-link rounded-3",to:"/","exact-active-class":"active"},{default:n(()=>[t[9]||(t[9]=e("i",{class:"bi bi-house me-2"},null,-1)),s(o,{t:"Home"})]),_:1})]),e("li",Ce,[s(l,{class:"nav-link rounded-3",to:"/settings","exact-active-class":"active"},{default:n(()=>[t[10]||(t[10]=e("i",{class:"bi bi-gear me-2"},null,-1)),s(o,{t:"Settings"})]),_:1})]),e("li",ye,[e("a",{class:"nav-link rounded-3",role:"button",onClick:t[0]||(t[0]=g=>a.openAgentModal=!0)},[t[11]||(t[11]=e("i",{class:"bi bi-question-circle me-2"},null,-1)),s(o,{t:"Help"})])])]),t[29]||(t[29]=e("hr",{class:"text-body my-2"},null,-1)),e("h6",{class:c(["sidebar-heading px-3 mt-3 mb-1 text-center",d.dashboardConfigurationStore.Configuration?.Server?.dashboard_theme==="dark"?"text-light-emphasis":"text-muted"])},[s(o,{t:"VPN Management"})],2),e("ul",Se,[e("li",Me,[e("a",{class:c(["nav-link rounded-3 dropdown-toggle",{show:a.showVpnDropdown}]),onClick:t[1]||(t[1]=C((...g)=>i.toggleVpnDropdown&&i.toggleVpnDropdown(...g),["prevent"])),role:"button"},[t[12]||(t[12]=e("i",{class:"bi bi-shield-lock me-2"},null,-1)),s(o,{t:"VPN Management"})],2),e("div",{class:c(["dropdown-menu",{show:a.showVpnDropdown}]),style:{position:"static",float:"none",width:"auto","margin-top":"0","background-color":"transparent",border:"none","box-shadow":"none"}},[e("div",De,[s(l,{to:"/wireguard_configurations",class:"nav-link rounded-3","active-class":"active",style:{padding:"0.5rem 1rem"}},{default:n(()=>[t[13]||(t[13]=e("i",{class:"bi bi-shield-lock me-2"},null,-1)),s(o,{t:"WireGuard Management"})]),_:1})])],2)])]),t[30]||(t[30]=e("hr",{class:"text-body my-2"},null,-1)),e("h6",{class:c(["sidebar-heading px-3 mt-3 mb-1 text-center",d.dashboardConfigurationStore.Configuration?.Server?.dashboard_theme==="dark"?"text-light-emphasis":"text-muted"])},[s(o,{t:"Firewall Management"})],2),e("ul",$e,[e("li",Ae,[e("a",{class:c(["nav-link rounded-3 dropdown-toggle",{show:a.showFirewallDropdown}]),onClick:t[2]||(t[2]=C((...g)=>i.toggleFirewallDropdown&&i.toggleFirewallDropdown(...g),["prevent"])),role:"button"},[t[14]||(t[14]=e("i",{class:"bi bi-shield-check me-2"},null,-1)),s(o,{t:"Firewall Management"})],2),e("div",{class:c(["dropdown-menu",{show:a.showFirewallDropdown}]),style:{position:"static",float:"none",width:"auto","margin-top":"0","background-color":"transparent",border:"none","box-shadow":"none"}},[e("div",Fe,[s(l,{to:"/firewall/filter",class:"nav-link rounded-3","active-class":"active",style:{padding:"0.5rem 1rem"}},{default:n(()=>[t[15]||(t[15]=e("i",{class:"bi bi-funnel me-2"},null,-1)),s(o,{t:"Firewall Filter"})]),_:1}),s(l,{to:"/firewall/nat",class:"nav-link rounded-3","active-class":"active",style:{padding:"0.5rem 1rem"}},{default:n(()=>[t[16]||(t[16]=e("i",{class:"bi bi-arrow-left-right me-2"},null,-1)),s(o,{t:"Firewall NAT"})]),_:1})])],2)]),e("li",Ve,[e("a",{class:c(["nav-link rounded-3 dropdown-toggle",{show:a.showRbacDropdown}]),onClick:t[3]||(t[3]=C((...g)=>i.toggleRbacDropdown&&i.toggleRbacDropdown(...g),["prevent"])),role:"button"},[t[17]||(t[17]=e("i",{class:"bi bi-people-fill me-2"},null,-1)),s(o,{t:"RBAC Management"})],2),e("div",{class:c(["dropdown-menu",{show:a.showRbacDropdown}]),style:{position:"static",float:"none",width:"auto","margin-top":"0","background-color":"transparent",border:"none","box-shadow":"none"}},[e("div",Re,[s(l,{to:"/enhanced-rbac",class:"nav-link rounded-3","active-class":"active",style:{padding:"0.5rem 1rem"}},{default:n(()=>[t[18]||(t[18]=e("i",{class:"bi bi-shield-check me-2"},null,-1)),s(o,{t:"Enhanced RBAC"})]),_:1}),s(l,{to:"/organizations",class:"nav-link rounded-3","active-class":"active",style:{padding:"0.5rem 1rem"}},{default:n(()=>[t[19]||(t[19]=e("i",{class:"bi bi-building me-2"},null,-1)),s(o,{t:"Organization Management"})]),_:1}),s(l,{to:"/rbac/policies",class:"nav-link rounded-3","active-class":"active",style:{padding:"0.5rem 1rem"}},{default:n(()=>[t[20]||(t[20]=e("i",{class:"bi bi-shield-shaded me-2"},null,-1)),s(o,{t:"Policy Management"})]),_:1}),s(l,{to:"/user_management",class:"nav-link rounded-3","active-class":"active",style:{padding:"0.5rem 1rem"}},{default:n(()=>[t[21]||(t[21]=e("i",{class:"bi bi-people me-2"},null,-1)),s(o,{t:"User Management"})]),_:1})])],2)])]),t[31]||(t[31]=e("hr",{class:"text-body my-2"},null,-1)),e("h6",{class:c(["sidebar-heading px-3 mt-3 mb-1 text-center",d.dashboardConfigurationStore.Configuration?.Server?.dashboard_theme==="dark"?"text-light-emphasis":"text-muted"])},[s(o,{t:"Tools"})],2),e("ul",Le,[e("li",Te,[s(l,{to:"/system_status",class:"nav-link rounded-3","active-class":"active"},{default:n(()=>[t[22]||(t[22]=e("i",{class:"bi bi-cpu me-2"},null,-1)),s(o,{t:"System Status"})]),_:1})]),e("li",He,[s(l,{to:"/routing",class:"nav-link rounded-3","active-class":"active"},{default:n(()=>[t[23]||(t[23]=e("i",{class:"bi bi-diagram-3 me-2"},null,-1)),s(o,{t:"Routing Management"})]),_:1})]),e("li",Ne,[s(l,{to:"/logging",class:"nav-link rounded-3","active-class":"active"},{default:n(()=>[t[24]||(t[24]=e("i",{class:"bi bi-journal-text me-2"},null,-1)),s(o,{t:"Logging Management"})]),_:1})]),e("li",Ge,[s(l,{to:"/ping",class:"nav-link rounded-3","active-class":"active"},{default:n(()=>[t[25]||(t[25]=e("i",{class:"bi bi-broadcast me-2"},null,-1)),s(o,{t:"Ping"})]),_:1})]),e("li",ze,[s(l,{to:"/traceroute",class:"nav-link rounded-3","active-class":"active"},{default:n(()=>[t[26]||(t[26]=e("i",{class:"bi bi-diagram-2 me-2"},null,-1)),s(o,{t:"Traceroute"})]),_:1})])]),t[32]||(t[32]=e("hr",{class:"text-body my-2"},null,-1)),e("ul",Be,[e("li",Oe,[e("a",{class:"nav-link text-danger rounded-3",onClick:t[4]||(t[4]=g=>this.dashboardConfigurationStore.signOut()),role:"button",style:{"font-weight":"bold"}},[t[27]||(t[27]=e("i",{class:"bi bi-box-arrow-left me-2"},null,-1)),s(o,{t:"Sign Out"})])]),e("li",Ue,[this.updateAvailable?(r(),m("a",{key:0,href:this.updateUrl,class:"text-decoration-none rounded-3",target:"_blank"},[e("small",je,[s(o,{t:this.updateMessage},null,8,["t"]),t[28]||(t[28]=h(" (")),s(o,{t:"Current Version:"}),h(" "+x(d.dashboardConfigurationStore.Configuration?.Server?.version)+") ",1)])],8,We)):(r(),m("small",Ie,[s(o,{t:this.updateMessage},null,8,["t"]),h(" ("+x(d.dashboardConfigurationStore.Configuration?.Server?.version)+") ",1)]))])])])]),s(y,{name:"zoom"},{default:n(()=>[this.openHelpModal?(r(),w(k,{key:0,onClose:t[5]||(t[5]=g=>{a.openHelpModal=!1})})):_("",!0)]),_:1}),s(y,{name:"slideIn"},{default:n(()=>[this.openAgentModal?(r(),w(f,{key:0,onClose:t[6]||(t[6]=g=>a.openAgentModal=!1)})):_("",!0)]),_:1})],10,ve)}const Ee=S(pe,[["render",Pe],["__scopeId","data-v-fedc8fbd"]]),qe={name:"index",components:{Message:z,Navbar:Ee},async setup(){return{dashboardConfigurationStore:M()}},computed:{getMessages(){return this.dashboardConfigurationStore.Messages.filter(u=>u.show)}}},Je=["data-bs-theme"],Ye={class:"row h-100"},Ke={class:"col-md-9 col-lg-10 overflow-y-scroll mb-0 pt-2"},Qe={class:"messageCentre text-body position-absolute d-flex"};function Xe(u,t,p,d,a,i){const o=v("Navbar"),l=v("RouterView"),k=v("Message");return r(),m("div",{class:"container-fluid flex-grow-1 main","data-bs-theme":this.dashboardConfigurationStore.Configuration?.Server?.dashboard_theme},[e("div",Ye,[s(o),e("main",Ke,[(r(),w(H,null,{default:n(()=>[s(l,null,{default:n(({Component:f})=>[s(y,{name:"fade2",mode:"out-in",appear:""},{default:n(()=>[(r(),w(T(f)))]),_:2},1024)]),_:1})]),_:1})),e("div",Qe,[s($,{name:"message",tag:"div",class:"position-relative flex-sm-grow-0 flex-grow-1 d-flex align-items-end ms-sm-auto flex-column gap-2"},{default:n(()=>[(r(!0),m(N,null,G(i.getMessages.slice().reverse(),f=>(r(),w(k,{message:f,key:f.id},null,8,["message"]))),128))]),_:1})])])])],8,Je)}const ot=S(qe,[["render",Xe],["__scopeId","data-v-40f83857"]]);export{ot as default};
//# sourceMappingURL=index-BYwP4XXh.js.map
