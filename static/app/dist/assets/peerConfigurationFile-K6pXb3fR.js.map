{"version":3,"file":"peerConfigurationFile-K6pXb3fR.js","sources":["../../src/components/configurationComponents/peerConfigurationFile.vue"],"sourcesContent":["<script setup>\nimport LocaleText from \"@/components/text/localeText.vue\";\nimport {DashboardConfigurationStore} from \"@/stores/DashboardConfigurationStore.js\";\nimport {onMounted, ref} from \"vue\";\nimport {fetchGet} from \"@/utilities/fetch.js\";\nimport QRCode from \"qrcode\";\nimport {useRoute} from \"vue-router\";\nconst emit = defineEmits(['close'])\nconst props = defineProps({\n\tselectedPeer: Object\n})\nconst store = DashboardConfigurationStore()\nconst copied = ref(false)\nconst configurationFile = ref(\"\")\nconst loading = ref(true)\nconst error = ref({\n\terror: false,\n\tmessage: undefined\n})\n\nonMounted(() => {\n\tconst route = useRoute();\n\tfetchGet(\"/api/downloadPeer/\"+route.params.id, {\n\t\tid: props.selectedPeer.id\n\t}, (res) => {\n\t\tif (res.status){\n\t\t\tconfigurationFile.value = res.data.file\n\t\t\tloading.value = false;\n\t\t}else{\n\t\t\tthis.dashboardStore.newMessage(\"Server\", res.message, \"danger\")\n\t\t}\n\t})\n})\n\nconst copy = async () => {\n\tif (navigator.clipboard && navigator.clipboard.writeText){\n\t\tnavigator.clipboard.writeText(configurationFile.value).then(() => {\n\t\t\tcopied.value = true;\n\t\t\tsetTimeout(() => {\n\t\t\t\tcopied.value = false;\n\t\t\t}, 3000)\n\t\t}).catch(() => {\n\t\t\tstore.newMessage(\"WGDashboard\",\"Failed to copy\", \"danger\");\n\t\t})\n\t}else{\n\t\tconst ele = document.querySelector(\"#peerConfigurationFile\");\n\t\tele.select();\n\t\tconst successful = document.execCommand(\"copy\");\n\t\tif (successful) {\n\t\t\tcopied.value = true;\n\t\t\tsetTimeout(() => {\n\t\t\t\tcopied.value = false;\n\t\t\t}, 3000)\n\t\t} else {\n\t\t\tstore.newMessage(\"WGDashboard\",\"Failed to copy\", \"danger\");\n\t\t}\n\t}\n}\n</script>\n\n<template>\n\t<div class=\"peerSettingContainer w-100 h-100 position-absolute top-0 start-0\">\n\t\t<div class=\"container d-flex h-100 w-100\">\n\t\t\t<div class=\"m-auto modal-dialog-centered dashboardModal justify-content-center\">\n\t\t\t\t<div class=\"card rounded-3 shadow w-100\">\n\t\t\t\t\t<div class=\"card-header bg-transparent d-flex align-items-center gap-2 border-0 p-4 pb-0\">\n\t\t\t\t\t\t<h4 class=\"mb-0\">\n\t\t\t\t\t\t\t<LocaleText t=\"Peer Configuration File\"></LocaleText>\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t<button type=\"button\" class=\"btn-close ms-auto\" \n\t\t\t\t\t\t        @click=\"emit('close')\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"card-body p-4 d-flex flex-column gap-3\">\n\t\t\t\t\t\t<div style=\"height: 300px\" class=\"d-flex\">\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tstyle=\"height: 300px\"\n\t\t\t\t\t\t\t\tclass=\"form-control w-100 rounded-3 animate__fadeIn animate__faster animate__animated\"\n\t\t\t\t\t\t\t\tid=\"peerConfigurationFile\"\n\t\t\t\t\t\t\t\t:class=\"{'d-none': loading}\"\n\t\t\t\t\t\t\t\t:value=\"configurationFile\"></textarea>\n\t\t\t\t\t\t\t<div class=\"spinner-border m-auto\" role=\"status\" v-if=\"loading\">\n\t\t\t\t\t\t\t\t<span class=\"visually-hidden\">Loading...</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"d-flex\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t@click=\"copy()\"\n\t\t\t\t\t\t\t\t:disabled=\"copied || loading\"\n\t\t\t\t\t\t\t\tclass=\"ms-auto btn bg-primary-subtle border-primary-subtle text-primary-emphasis rounded-3 position-relative\">\n\t\t\t\t\t\t\t\t<Transition name=\"slide-up\" mode=\"out-in\">\n\t\t\t\t\t\t\t\t\t<span v-if=\"!copied\" class=\"d-block\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"bi bi-clipboard-fill\"></i>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span v-else class=\"d-block\" id=\"check\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"bi bi-check-circle-fill\"></i>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</Transition>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<style scoped>\n.slide-up-enter-active,\n.slide-up-leave-active {\n\ttransition: all 0.2s cubic-bezier(0.42, 0, 0.22, 1);\n}\n\n.slide-up-enter-from, .slide-up-leave-to {\n\topacity: 0;\n\ttransform: scale(0.9);\n}\n\n@keyframes spin {\n\tfrom{\n\t\ttransform: rotate(0deg);\n\t}\n\tto{\n\t\ttransform: rotate(360deg);\n\t}\n}\n\n#check{\n\tanimation: cubic-bezier(0.42, 0, 0.22, 1.3) 0.7s spin;\n}\n</style>"],"names":["emit","__emit","props","__props","store","DashboardConfigurationStore","copied","ref","configurationFile","loading","onMounted","route","useRoute","fetchGet","res","copy"],"mappings":"24BAOA,MAAMA,EAAOC,EACPC,EAAQC,EAGRC,EAAQC,EAA6B,EACrCC,EAASC,EAAI,EAAK,EAClBC,EAAoBD,EAAI,EAAE,EAC1BE,EAAUF,EAAI,EAAI,EACVA,EAAI,CACjB,MAAO,GACP,QAAS,MACV,CAAC,EAEDG,EAAU,IAAM,CACf,MAAMC,EAAQC,IACdC,EAAS,qBAAqBF,EAAM,OAAO,GAAI,CAC9C,GAAIT,EAAM,aAAa,EACvB,EAAGY,GAAQ,CACPA,EAAI,QACPN,EAAkB,MAAQM,EAAI,KAAK,KACnCL,EAAQ,MAAQ,IAEhB,KAAK,eAAe,WAAW,SAAUK,EAAI,QAAS,QAAQ,CAEjE,CAAE,CACF,CAAC,EAED,MAAMC,EAAO,SAAY,CACpB,UAAU,WAAa,UAAU,UAAU,UAC9C,UAAU,UAAU,UAAUP,EAAkB,KAAK,EAAE,KAAK,IAAM,CACjEF,EAAO,MAAQ,GACf,WAAW,IAAM,CAChBA,EAAO,MAAQ,EACf,EAAE,GAAI,CACV,CAAG,EAAE,MAAM,IAAM,CACdF,EAAM,WAAW,cAAc,iBAAkB,QAAQ,CAC5D,CAAG,GAEW,SAAS,cAAc,wBAAwB,EACvD,OAAM,EACS,SAAS,YAAY,MAAM,GAE7CE,EAAO,MAAQ,GACf,WAAW,IAAM,CAChBA,EAAO,MAAQ,EACf,EAAE,GAAI,GAEPF,EAAM,WAAW,cAAc,iBAAkB,QAAQ,EAG5D"}