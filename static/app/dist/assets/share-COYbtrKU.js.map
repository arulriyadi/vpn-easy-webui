{"version":3,"file":"share-COYbtrKU.js","sources":["../../src/views/share.vue"],"sourcesContent":["<script>\nimport {useRoute} from \"vue-router\";\nimport {DashboardConfigurationStore} from \"@/stores/DashboardConfigurationStore.js\";\nimport {fetchGet} from \"@/utilities/fetch.js\";\nimport {ref} from \"vue\";\nimport QRCode from \"qrcode\";\nimport LocaleText from \"@/components/text/localeText.vue\";\n\nexport default {\n\tname: \"share\",\n\tcomponents: {LocaleText},\n\tasync setup(){\n\t\tconst route = useRoute();\n\t\tconst loaded = ref(false)\n\t\tconst store = DashboardConfigurationStore();\n\t\tconst theme = ref(\"\");\n\t\tconst peerConfiguration = ref(undefined);\n\t\tconst blob = ref(new Blob())\n\t\tawait fetchGet(\"/api/getDashboardTheme\", {}, (res) => {\n\t\t\ttheme.value = res.data\n\t\t});\n\t\t\n\t\tconst id = route.query.ShareID\n\t\tif(id === undefined || id.length === 0){\n\t\t\tpeerConfiguration.value = undefined\n\t\t\tloaded.value = true;\n\t\t}else{\n\t\t\tawait fetchGet(\"/api/sharePeer/get\", {\n\t\t\t\tShareID: id\n\t\t\t}, (res) => {\n\t\t\t\tif (res.status){\n\t\t\t\t\tpeerConfiguration.value = res.data;\n\t\t\t\t\tblob.value = new Blob([peerConfiguration.value.file], { type: \"text/plain\" });\n\t\t\t\t}else{\n\t\t\t\t\tpeerConfiguration.value = undefined\n\t\t\t\t}\n\t\t\t\tloaded.value = true;\n\t\t\t})\n\t\t}\n\t\treturn {store, theme, peerConfiguration, blob}\n\t},\n\tmounted() {\n\t\tif(this.peerConfiguration){\n\t\t\tQRCode.toCanvas(document.querySelector(\"#qrcode\"), this.peerConfiguration.file,  (error) => {\n\t\t\t\tif (error) console.error(error)\n\t\t\t})\n\t\t}\n\t},\n\tmethods:{\n\t\tdownload(){\n\t\t\tconst blob = new Blob([this.peerConfiguration.file], { type: \"text/plain\" });\n\t\t\tconst jsonObjectUrl = URL.createObjectURL(blob);\n\t\t\tconst filename = `${this.peerConfiguration.fileName}.conf`;\n\t\t\tconst anchorEl = document.createElement(\"a\");\n\t\t\tanchorEl.href = jsonObjectUrl;\n\t\t\tanchorEl.download = filename;\n\t\t\tanchorEl.click();\n\t\t}\n\t},\n\tcomputed:{\n\t\tgetBlob(){\n\t\t\treturn URL.createObjectURL(this.blob)\n\t\t}\n\t}\n}\n</script>\n\n<template>\n\t<div class=\"container-fluid login-container-fluid d-flex main pt-5 overflow-scroll\"\n\t     :data-bs-theme=\"this.theme\">\n\t\t<div class=\"m-auto text-body\" style=\"width: 500px\">\n\t\t\t<div class=\"text-center position-relative\" style=\"\"\n\t\t\t     v-if=\"!this.peerConfiguration\">\n\t\t\t\t<div class=\"animate__animated animate__fadeInUp\">\n\t\t\t\t\t<h1 style=\"font-size: 20rem; filter: blur(1rem); animation-duration: 7s\"\n\t\t\t\t\t    class=\"animate__animated animate__flash animate__infinite\">\n\t\t\t\t\t\t<i class=\"bi bi-file-binary\"></i>\n\t\t\t\t\t</h1>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"position-absolute w-100 h-100 top-0 start-0 d-flex animate__animated animate__fadeInUp\"\n\t\t\t\t\tstyle=\"animation-delay: 0.1s;\"\n\t\t\t\t>\n\t\t\t\t\t<h3 class=\"m-auto\">\n\t\t\t\t\t\t<LocaleText t=\"Oh no... This link is either expired or invalid.\"></LocaleText>\n\t\t\t\t\t</h3>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-else class=\"d-flex align-items-center flex-column gap-3\">\n\t\t\t\t<div class=\"h1 dashboardLogo text-center animate__animated animate__fadeInUp\">\n\t\t\t\t\t<h6>WGDashboard</h6>\n\t\t\t\t\t<LocaleText t=\"Scan QR Code with the WireGuard App to add peer\"></LocaleText>\n\t\t\t\t</div>\n\t\t\t\t<canvas id=\"qrcode\" class=\"rounded-3 shadow animate__animated animate__fadeInUp mb-3\" ref=\"qrcode\"></canvas>\n\t\t\t\t<p class=\"text-muted animate__animated animate__fadeInUp mb-1\"\n\t\t\t\t   style=\"animation-delay: 0.2s;\"> \n\t\t\t\t\t<LocaleText t=\"or click the button below to download the \"></LocaleText>\n\t\t\t\t\t<samp>.conf</samp>\n\t\t\t\t\t<LocaleText t=\" file\"></LocaleText>\n\t\t\t\t</p>\n\t\t\t\t<a \n\t\t\t\t\t:download=\"this.peerConfiguration.fileName + '.conf'\"\n\t\t\t\t\t:href=\"getBlob\"\n\t\t\t\t\tclass=\"btn btn-lg bg-primary-subtle text-primary-emphasis border-1 border-primary-subtle animate__animated animate__fadeInUp shadow-sm\"\n\t\t\t\t        style=\"animation-delay: 0.25s;\"\n\t\t\t\t\t\n\t\t\t\t>\n\t\t\t\t\t<i class=\"bi bi-download\"></i>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<style scoped>\n\t.animate__fadeInUp{\n\t\tanimation-timing-function: cubic-bezier(0.42, 0, 0.22, 1.0)\n\t}\n</style>"],"names":["_sfc_main","LocaleText","route","useRoute","loaded","ref","store","DashboardConfigurationStore","theme","peerConfiguration","blob","fetchGet","res","id","QRCode","error","jsonObjectUrl","filename","anchorEl","_hoisted_1","_hoisted_5","_hoisted_7","_hoisted_10","_createElementBlock","_createElementVNode","_hoisted_2","_openBlock","_hoisted_6","_cache","_createVNode","_component_LocaleText","_hoisted_8","_hoisted_9","$options","_hoisted_3","_hoisted_4"],"mappings":"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"}