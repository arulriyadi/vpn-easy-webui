import{_ as h,r as u,o as S,c as r,b as t,f as g,F as x,m as k,h as w,z as y,A as _,B as C,a as d,s as z,t as v}from"./index-BHlSp020.js";const M={name:"OrganizationSubnets",setup(){const m=u([]),s=u(!1),c=u(null),e=u({subnet_cidr:"",description:"",is_primary:!1}),b=async()=>{s.value=!0;try{const a=await(await fetch("/api/organization/subnets/all")).json();a.status?m.value=a.data:l("error","Failed to load subnets: "+a.message)}catch(o){l("error","Error loading subnets: "+o.message)}finally{s.value=!1}},f=o=>{c.value=o,e.value={subnet_cidr:o.subnet_cidr,description:o.description||"",is_primary:o.is_primary},new bootstrap.Modal(document.getElementById("editSubnetModal")).show()},n=async()=>{try{const a=await(await fetch(`/api/organization/subnets/${c.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.value)})).json();a.status?(l("success",a.message),bootstrap.Modal.getInstance(document.getElementById("editSubnetModal")).hide(),b()):l("error",a.message)}catch(o){l("error","Error saving subnet: "+o.message)}},p=async o=>{if(confirm("Are you sure you want to delete this subnet?"))try{const i=await(await fetch(`/api/organization/subnets/${o}`,{method:"DELETE"})).json();i.status?(l("success",i.message),b()):l("error",i.message)}catch(a){l("error","Error deleting subnet: "+a.message)}},l=(o,a)=>{const i=document.createElement("div");i.className=`alert alert-${o==="error"?"danger":o} alert-dismissible fade show position-fixed`,i.style.top="20px",i.style.right="20px",i.style.zIndex="9999",i.innerHTML=`
        <i class="bi bi-${o==="success"?"check-circle":"exclamation-triangle"} me-2"></i>
        ${a}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      `,document.body.appendChild(i),setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},5e3)};return S(()=>{b()}),{subnets:m,loading:s,editingSubnet:c,subnetForm:e,editSubnet:f,saveSubnet:n,deleteSubnet:p}}},E={class:"container-fluid"},D={class:"row"},F={class:"col-12"},T={class:"card"},I={class:"card-body p-0"},N={key:0,class:"text-center p-4"},B={key:1,class:"text-center p-4"},L={key:2,class:"table-responsive"},O={class:"table table-hover mb-0"},j={class:"d-flex align-items-center"},P={key:0,class:"badge bg-success"},V={key:1,class:"badge bg-secondary"},A=["onClick"],U=["onClick"],R={class:"modal fade",id:"editSubnetModal",tabindex:"-1","aria-labelledby":"editSubnetModalLabel","aria-hidden":"true"},q={class:"modal-dialog"},H={class:"modal-content"},J={class:"modal-body"},G={class:"mb-3"},K=["value"],Q={class:"mb-3"},W={class:"mb-3"},X={class:"mb-3"},Y={class:"form-check"},Z={class:"modal-footer"};function $(m,s,c,e,b,f){return d(),r("div",E,[t("div",D,[t("div",F,[s[11]||(s[11]=t("div",{class:"d-flex justify-content-between align-items-center mb-4"},[t("div",null,[t("h2",{class:"mb-0"},[t("i",{class:"bi bi-diagram-3 me-2"}),g(" Organization Subnet Management ")]),t("p",{class:"text-muted mb-0"},"Manage network subnets for organizations")])],-1)),t("div",T,[s[10]||(s[10]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},[t("i",{class:"bi bi-diagram-3 me-2"}),g(" All Organization Subnets ")])],-1)),t("div",I,[e.loading?(d(),r("div",N,s[5]||(s[5]=[t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1)]))):e.subnets.length===0?(d(),r("div",B,s[6]||(s[6]=[t("i",{class:"bi bi-diagram-3 text-muted",style:{"font-size":"3rem"}},null,-1),t("p",{class:"text-muted mt-2"},"No organization subnets found.",-1)]))):(d(),r("div",L,[t("table",O,[s[9]||(s[9]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Organization"),t("th",null,"Subnet CIDR"),t("th",null,"Description"),t("th",null,"Primary"),t("th",null,"Actions")])],-1)),t("tbody",null,[(d(!0),r(x,null,k(e.subnets,n=>(d(),r("tr",{key:n.id},[t("td",null,[t("div",j,[t("div",{class:"me-2",style:z(`width: 12px; height: 12px; background-color: ${n.org_color||"#007bff"}; border-radius: 50%;`)},null,4),t("strong",null,v(n.org_name),1)])]),t("td",null,[t("code",null,v(n.subnet_cidr),1)]),t("td",null,v(n.description||"-"),1),t("td",null,[n.is_primary?(d(),r("span",P,"Primary")):(d(),r("span",V,"Secondary"))]),t("td",null,[t("button",{class:"btn btn-sm btn-outline-primary",onClick:p=>e.editSubnet(n),title:"Edit Subnet"},s[7]||(s[7]=[t("i",{class:"bi bi-pencil"},null,-1)]),8,A),t("button",{class:"btn btn-sm btn-outline-danger",onClick:p=>e.deleteSubnet(n.id),title:"Delete Subnet"},s[8]||(s[8]=[t("i",{class:"bi bi-trash"},null,-1)]),8,U)])]))),128))])])]))])])])]),t("div",R,[t("div",q,[t("div",H,[s[17]||(s[17]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"editSubnetModalLabel"},"Edit Subnet"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",J,[t("form",{onSubmit:s[3]||(s[3]=w((...n)=>e.saveSubnet&&e.saveSubnet(...n),["prevent"]))},[t("div",G,[s[12]||(s[12]=t("label",{class:"form-label"},"Organization",-1)),t("input",{type:"text",class:"form-control",value:e.editingSubnet.org_name,readonly:""},null,8,K)]),t("div",Q,[s[13]||(s[13]=t("label",{for:"subnetCidr",class:"form-label"},[g("Subnet CIDR "),t("span",{class:"text-danger"},"*")],-1)),y(t("input",{type:"text",class:"form-control",id:"subnetCidr","onUpdate:modelValue":s[0]||(s[0]=n=>e.subnetForm.subnet_cidr=n),required:"",placeholder:"e.g., 10.10.0.0/16"},null,512),[[_,e.subnetForm.subnet_cidr]])]),t("div",W,[s[14]||(s[14]=t("label",{for:"subnetDescription",class:"form-label"},"Description",-1)),y(t("input",{type:"text",class:"form-control",id:"subnetDescription","onUpdate:modelValue":s[1]||(s[1]=n=>e.subnetForm.description=n),placeholder:"Enter subnet description"},null,512),[[_,e.subnetForm.description]])]),t("div",X,[t("div",Y,[y(t("input",{class:"form-check-input",type:"checkbox",id:"isPrimary","onUpdate:modelValue":s[2]||(s[2]=n=>e.subnetForm.is_primary=n)},null,512),[[C,e.subnetForm.is_primary]]),s[15]||(s[15]=t("label",{class:"form-check-label",for:"isPrimary"}," Mark as primary subnet ",-1))])])],32)]),t("div",Z,[s[16]||(s[16]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),t("button",{type:"button",class:"btn btn-primary",onClick:s[4]||(s[4]=(...n)=>e.saveSubnet&&e.saveSubnet(...n))},"Save Changes")])])])])])}const st=h(M,[["render",$],["__scopeId","data-v-6925e230"]]);export{st as default};
//# sourceMappingURL=organizationSubnets-DsEK7m1D.js.map
