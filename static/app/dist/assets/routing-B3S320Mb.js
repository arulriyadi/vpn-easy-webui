import{_ as x,r as u,o as R,c as a,b as t,f as m,F as N,m as A,h as C,z as v,A as b,C as S,L as V,e as w,n as I,t as d,g as M,y as D,a as i,K as $}from"./index-D8hVfsLB.js";const E={class:"container-fluid"},F={class:"row"},T={class:"col-12"},U={class:"d-flex justify-content-between align-items-center mb-4"},P={class:"card"},B={class:"card-body"},G={key:0,class:"text-center py-4"},L={key:1,class:"text-center py-4 text-muted"},q={key:2,class:"table-responsive"},z={class:"table table-striped table-hover"},j={class:"badge bg-primary"},K={key:0,class:"badge bg-info"},O={key:1,class:"text-muted"},H=["onClick"],J={key:0,class:"modal show d-block",tabindex:"-1",style:{"background-color":"rgba(0,0,0,0.5)"}},Q={class:"modal-dialog modal-lg"},W={class:"modal-content"},X={class:"modal-header"},Y={class:"modal-body"},Z={class:"row"},tt={class:"col-md-6 mb-3"},et={class:"col-md-6 mb-3"},st={class:"row"},ot={class:"col-md-6 mb-3"},lt={class:"col-md-6 mb-3"},at={class:"row"},it={class:"col-md-12 mb-3"},nt={class:"modal-footer"},dt=["disabled"],rt={key:0,class:"spinner-border spinner-border-sm me-1"},ut={class:"toast-container position-fixed bottom-0 end-0 p-3"},ct={key:0,class:"toast show",role:"alert"},mt={class:"toast-header"},vt={class:"ms-2"},ft={class:"toast-body"},bt={__name:"routing",setup(pt){const p=u(!0),f=u(!1),c=u(!1),y=u([]),l=u({destination:"",gateway:"",interface:"",metric:"",source:""}),r=u({show:!1,type:"success",message:""}),g=async()=>{try{p.value=!0;const o=await M("/api/routes");o.status?y.value=o.data||[]:n("error","Failed to load routes")}catch(o){n("error","Error loading routes: "+o.message)}finally{p.value=!1}},h=async()=>{try{f.value=!0;const o=await D("/api/routes",l.value);o.status?(n("success","Route added successfully"),c.value=!1,k(),await g()):n("error",o.message||"Failed to add route")}catch(o){n("error","Error adding route: "+o.message)}finally{f.value=!1}},_=async o=>{if(confirm("Are you sure you want to delete this route?"))try{const e=await $(`/api/routes/${o}`);e.status?(n("success","Route deleted successfully"),await g()):n("error",e.message||"Failed to delete route")}catch(e){n("error","Error deleting route: "+e.message)}},k=()=>{l.value={destination:"",gateway:"",interface:"",metric:"",source:""}},n=(o,e)=>{r.value={show:!0,type:o,message:e},setTimeout(()=>{r.value.show=!1},5e3)};return R(()=>{g()}),(o,e)=>(i(),a("div",E,[t("div",F,[t("div",T,[t("div",U,[e[10]||(e[10]=t("h2",{class:"mb-0"},[t("i",{class:"bi bi-diagram-3 me-2"}),m(" Routing Management ")],-1)),t("div",null,[t("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=s=>c.value=!0)},e[9]||(e[9]=[t("i",{class:"bi bi-plus-circle me-1"},null,-1),m(" Add Route ")]))])]),t("div",P,[e[15]||(e[15]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"bi bi-diagram-3 me-2"}),m(" Routing Table ")])],-1)),t("div",B,[p.value?(i(),a("div",G,e[11]||(e[11]=[t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1)]))):y.value.length===0?(i(),a("div",L,e[12]||(e[12]=[t("i",{class:"bi bi-diagram-3 fs-1"},null,-1),t("p",{class:"mt-2"},"No routes found",-1)]))):(i(),a("div",q,[t("table",z,[e[14]||(e[14]=t("thead",{class:"table-dark"},[t("tr",null,[t("th",null,"ID"),t("th",null,"Destination"),t("th",null,"Gateway"),t("th",null,"Interface"),t("th",null,"Metric"),t("th",null,"Source"),t("th",null,"Actions")])],-1)),t("tbody",null,[(i(!0),a(N,null,A(y.value,s=>(i(),a("tr",{key:s.id},[t("td",null,d(s.id),1),t("td",null,[t("span",j,d(s.destination||"default"),1)]),t("td",null,d(s.gateway||"N/A"),1),t("td",null,[s.interface?(i(),a("span",K,d(s.interface),1)):(i(),a("span",O,"N/A"))]),t("td",null,d(s.metric||"N/A"),1),t("td",null,d(s.source||"N/A"),1),t("td",null,[t("button",{class:"btn btn-sm btn-outline-danger",onClick:yt=>_(s.id)},e[13]||(e[13]=[t("i",{class:"bi bi-trash"},null,-1)]),8,H)])]))),128))])])]))])])])]),c.value?(i(),a("div",J,[t("div",Q,[t("div",W,[t("div",X,[e[16]||(e[16]=t("h5",{class:"modal-title"},[t("i",{class:"bi bi-plus-circle me-2"}),m(" Add Static Route ")],-1)),t("button",{type:"button",class:"btn-close",onClick:e[1]||(e[1]=s=>c.value=!1)})]),t("div",Y,[t("form",{onSubmit:C(h,["prevent"])},[t("div",Z,[t("div",tt,[e[17]||(e[17]=t("label",{for:"destination",class:"form-label"},"Destination Network",-1)),v(t("input",{type:"text",id:"destination","onUpdate:modelValue":e[2]||(e[2]=s=>l.value.destination=s),class:"form-control",placeholder:"e.g., 192.168.1.0/24",required:""},null,512),[[b,l.value.destination]]),e[18]||(e[18]=t("div",{class:"form-text"},"Network address with CIDR notation",-1))]),t("div",et,[e[19]||(e[19]=t("label",{for:"gateway",class:"form-label"},"Gateway",-1)),v(t("input",{type:"text",id:"gateway","onUpdate:modelValue":e[3]||(e[3]=s=>l.value.gateway=s),class:"form-control",placeholder:"e.g., 192.168.1.1",required:""},null,512),[[b,l.value.gateway]]),e[20]||(e[20]=t("div",{class:"form-text"},"Next hop IP address",-1))])]),t("div",st,[t("div",ot,[e[22]||(e[22]=t("label",{for:"interface",class:"form-label"},"Interface",-1)),v(t("select",{id:"interface","onUpdate:modelValue":e[4]||(e[4]=s=>l.value.interface=s),class:"form-select"},e[21]||(e[21]=[V('<option value="" data-v-f90df6d2>Auto-detect</option><option value="ens18" data-v-f90df6d2>ens18</option><option value="docker0" data-v-f90df6d2>docker0</option><option value="tailscale0" data-v-f90df6d2>tailscale0</option><option value="wg0" data-v-f90df6d2>wg0</option><option value="lo" data-v-f90df6d2>lo</option>',6)]),512),[[S,l.value.interface]])]),t("div",lt,[e[23]||(e[23]=t("label",{for:"metric",class:"form-label"},"Metric",-1)),v(t("input",{type:"number",id:"metric","onUpdate:modelValue":e[5]||(e[5]=s=>l.value.metric=s),class:"form-control",placeholder:"e.g., 100",min:"1",max:"65535"},null,512),[[b,l.value.metric]]),e[24]||(e[24]=t("div",{class:"form-text"},"Route priority (lower = higher priority)",-1))])]),t("div",at,[t("div",it,[e[25]||(e[25]=t("label",{for:"source",class:"form-label"},"Source IP",-1)),v(t("input",{type:"text",id:"source","onUpdate:modelValue":e[6]||(e[6]=s=>l.value.source=s),class:"form-control",placeholder:"e.g., 192.168.1.100"},null,512),[[b,l.value.source]]),e[26]||(e[26]=t("div",{class:"form-text"},"Optional: Source IP for the route",-1))])])],32)]),t("div",nt,[t("button",{type:"button",class:"btn btn-secondary",onClick:e[7]||(e[7]=s=>c.value=!1)},"Cancel"),t("button",{type:"button",class:"btn btn-primary",onClick:h,disabled:f.value},[f.value?(i(),a("span",rt)):w("",!0),e[27]||(e[27]=m(" Add Route "))],8,dt)])])])])):w("",!0),t("div",ut,[r.value.show?(i(),a("div",ct,[t("div",mt,[t("i",{class:I(r.value.type==="success"?"bi bi-check-circle-fill text-success":"bi bi-exclamation-triangle-fill text-danger")},null,2),t("strong",vt,d(r.value.type==="success"?"Success":"Error"),1),t("button",{type:"button",class:"btn-close ms-auto",onClick:e[8]||(e[8]=s=>r.value.show=!1)})]),t("div",ft,d(r.value.message),1)])):w("",!0)])]))}},wt=x(bt,[["__scopeId","data-v-f90df6d2"]]);export{wt as default};
//# sourceMappingURL=routing-B3S320Mb.js.map
